<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <title>Dash Social</title>
    <style>
      body {
        overflow: hidden;
        margin: 0;
        background: #000;
      }
      .container {
        height: 100vh;
        width: 100vw;
        display: flex;
      }
      #localIframe {
        width: 75%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div style="height: 100%; flex: 1">
        <button id="button">更换过期链接</button>
      </div>
      <iframe
        id="localIframe"
        src="https://staging-iota.kawo.com/embed?sig=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI1OGM4OWY2ZWU0YjA0MTNlODU1MjQ1ZmUiLCJpc3MiOiJodHRwczovL3N0YWdpbmctYXBwLmthd28uY29tL2F1dGgiLCJhdWQiOiJodHRwczovL3N0YWdpbmctYXBwLmthd28uY29tL2VtYmVkIiwiaWF0IjoxNzU2ODkxODgxLCJleHAiOjE3NTY5MTM0ODEsImJyYW5kSWQiOiI2NDI2OTViOTQ4MjQ3OTExZjhmMGM2Y2UiLCJzY29wZSI6ImVtYmVkOnJlYWQ6YnJhbmRfb3ZlcnZpZXcifQ.-C-Ib5M7X0pYRxWP_1YIEYLwf6Q5hOXVmjRGnwd6gP4"
        height="100%"
        frameborder="1"
      ></iframe>
    </div>

    <script type="text/javascript">
      const iframe = document.getElementById("localIframe");
      document.getElementById("button").addEventListener("click", () => {
        iframe.src =
          "https://staging-iota.kawo.com/embed?sig=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI1OGM4OWY2ZWU0YjA0MTNlODU1MjQ1ZmUiLCJpc3MiOiJodHRwczovL3N0YWdpbmctYXBwLmthd28uY29tL2F1dGgiLCJhdWQiOiJodHRwczovL3N0YWdpbmctYXBwLmthd28uY29tL2VtYmVkIiwiaWF0IjoxNzU2NzEwODgzLCJleHAiOjE3NTY3MzI0ODMsImJyYW5kSWQiOiI2NDI2OTViOTQ4MjQ3OTExZjhmMGM2Y2UiLCJzY29wZSI6ImVtYmVkOnJlYWQ6YnJhbmRfb3ZlcnZpZXcifQ.8Z-urwYnmHp41rHOTkJlTjAM_LCDPHfCA-gSlwG5QiU";
      });
      window.addEventListener(
        "message",
        (event) => {
          console.error(99999, event);
          // 安全校验：只处理来自指定域名的消息（重要！防止恶意网站攻击）
          const allowedOrigins = [
            "http://localhost:3000", // 子页面的本地域名+端口
            "https://staging-iota.kawo.com", // 若子页面可能在其他端口，需添加
          ];

          if (!allowedOrigins.includes(event.origin)) {
            console.warn("拒绝接收来自未授权域名的消息：", event.origin);
            return;
          }
          // 验证通过，处理消息
          console.error("父页面收到消息：", event.data);

          // 可选：向子页面发送回复
        },
        false
      );
    </script>
  </body>
</html>
